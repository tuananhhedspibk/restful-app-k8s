apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
- ../../base
- namespace.yaml
- service-account.yaml
- secret-provider-class.yaml

configMapGenerator:
- behavior: replace
  envs:
  - config.env
  name: restful-app-config
generatorOptions:
  disableNameSuffixHash: true

patchesStrategicMerge:
- patch-deployment.yaml
- patch-hpa.yaml
- patch-migration.yaml

namespace: restful-stg
images:
- name: restful-app
  newName: 265593583957.dkr.ecr.ap-northeast-1.amazonaws.com/restful-app/restful-app
  newTag: 5aed599dcc02c2f03929372fcdd1f0033d7a6e11
